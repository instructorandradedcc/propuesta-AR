<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Propuesta Modelo AR en Salud</title>
    <!-- Bibliotecas de A-Frame y MindAR -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

    <!-- Favicon del repositorio -->
    <link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/instructorandradedcc/propuesta-AR/main/favicon3dAR.ico">

    <style>
      /* Estilos para la interfaz y la pantalla de carga */
      body {
        margin: 0;
        font-family: Arial, sans-serif;
      }
      .container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      #loader {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: white;
        color: #333;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        transition: opacity 0.5s;
      }
      .loader-spinner {
        border: 8px solid #f3f3f3;
        border-top: 8px solid #3498db;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        animation: spin 1.5s linear infinite;
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      #loader.hidden {
        opacity: 0;
        pointer-events: none;
      }
      .logo-container {
        position: absolute;
        bottom: 20px;
        right: 20px;
        z-index: 100;
      }
      .logo {
        width: 150px;
        height: auto;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      }
    </style>
  </head>
  <body>
    <!-- Contenedor principal de la aplicación -->
    <div class="container">
      <!-- Pantalla de carga -->
      <div id="loader">
        <div class="loader-spinner"></div>
        <p style="margin-top: 20px; font-size: 1.2em;">Cargando experiencia AR...</p>
      </div>

      <!-- Logo de la fundación -->
      <div class="logo-container">
        <img src="https://raw.githubusercontent.com/instructorandradedcc/propuesta-AR/main/logofundacion.jpg" alt="Logo Fundación" class="logo"/>
      </div>

      <!--
        ==========================================================================================
        NOTA IMPORTANTE PARA MANEJAR MÚLTIPLES MARCADORES:

        MindAR funciona mejor cuando todos los marcadores (las imágenes que activan el 3D)
        están compilados en UN SOLO archivo ".mind". Actualmente, tu repositorio tiene un archivo
        ".mind" para cada modelo.

        Para que todos los 8 modelos funcionen al mismo tiempo, sigue estos pasos:
        1. Ve al compilador online de MindAR: https://hiukim.github.io/mind-ar-js-doc/tools/compile/
        2. Sube allí TUS 8 IMÁGENES (.png, .jpg) que sirven como marcadores.
           (Ej: cabeza1.png, corazon.JPG, etc.)
        3. El compilador te dará UN SOLO archivo ".mind" para descargar. Guárdalo.
        4. Sube ese nuevo archivo a tu carpeta "asetss/markers" en GitHub.
        5. En la línea de abajo `imageTargetSrc`, reemplaza la URL actual por la URL de tu nuevo
           archivo ".mind" compilado.
        6. Finalmente, descomenta las otras 7 entidades <a-entity> que están más abajo en el código.
           Asegúrate de que el `targetIndex` de cada una corresponda al orden en que subiste
           las imágenes al compilador (el primero es 0, el segundo es 1, y así sucesivamente).

        Por ahora, el código está configurado para detectar únicamente el primer marcador ("cabeza1").
        ==========================================================================================
      -->

      <!-- Escena de Realidad Aumentada -->
      <a-scene
        mindar-image="imageTargetSrc: https://raw.githubusercontent.com/instructorandradedcc/propuesta-AR/main/asetss/markers/cabeza1.mind; maxTrack: 8;"
        color-space="sRGB"
        renderer="colorManagement: true, physicallyCorrectLights"
        vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false"
        id="ar-scene"
      >
        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

        <!-- Marcador 0: Cabeza -->
        <a-entity mindar-image-target="targetIndex: 0">
          <a-gltf-model
            rotation="0 0 0"
            position="0 0 0.1"
            scale="0.3 0.3 0.3"
            src="https://raw.githubusercontent.com/instructorandradedcc/propuesta-AR/main/asetss/models/cabeza1.glb"
            animation-mixer
          ></a-gltf-model>
        </a-entity>

        <!-- Marcador 1: Corazón (Descomentar después de compilar los marcadores)
        <a-entity mindar-image-target="targetIndex: 1">
          <a-gltf-model
            rotation="0 0 0"
            position="0 0 0.1"
            scale="0.3 0.3 0.3"
            src="https://raw.githubusercontent.com/instructorandradedcc/propuesta-AR/main/asetss/models/corazon.glb"
            animation-mixer
          ></a-gltf-model>
        </a-entity>
        -->

        <!-- Marcador 2: Dedo y Mano (Descomentar después de compilar los marcadores)
        <a-entity mindar-image-target="targetIndex: 2">
          <a-gltf-model
            rotation="0 0 0"
            position="0 0 0.1"
            scale="0.3 0.3 0.3"
            src="https://raw.githubusercontent.com/instructorandradedcc/propuesta-AR/main/asetss/models/dedo-mano.glb"
            animation-mixer
          ></a-gltf-model>
        </a-entity>
        -->

        <!-- Marcador 3: Dedo (Descomentar después de compilar los marcadores)
        <a-entity mindar-image-target="targetIndex: 3">
          <a-gltf-model
            rotation="0 0 0"
            position="0 0 0.1"
            scale="0.3 0.3 0.3"
            src="https://raw.githubusercontent.com/instructorandradedcc/propuesta-AR/main/asetss/models/dedo.glb"
            animation-mixer
          ></a-gltf-model>
        </a-entity>
        -->

        <!-- Marcador 4: Hueso Columna (Descomentar después de compilar los marcadores)
        <a-entity mindar-image-target="targetIndex: 4">
          <a-gltf-model
            rotation="0 0 0"
            position="0 0 0.1"
            scale="0.3 0.3 0.3"
            src="https://raw.githubusercontent.com/instructorandradedcc/propuesta-AR/main/asetss/models/hueso-columna.glb"
            animation-mixer
          ></a-gltf-model>
        </a-entity>
        -->

        <!-- Marcador 5: Huesos Mano (Descomentar después de compilar los marcadores)
        <a-entity mindar-image-target="targetIndex: 5">
          <a-gltf-model
            rotation="0 0 0"
            position="0 0 0.1"
            scale="0.3 0.3 0.3"
            src="https://raw.githubusercontent.com/instructorandradedcc/propuesta-AR/main/asetss/models/huesosmano.glb"
            animation-mixer
          ></a-gltf-model>
        </a-entity>
        -->

        <!-- Marcador 6: Mano Izquierda Prótesis (Descomentar después de compilar los marcadores)
        <a-entity mindar-image-target="targetIndex: 6">
          <a-gltf-model
            rotation="0 0 0"
            position="0 0 0.1"
            scale="0.3 0.3 0.3"
            src="https://raw.githubusercontent.com/instructorandradedcc/propuesta-AR/main/asetss/models/mano-iz-protesis.glb"
            animation-mixer
          ></a-gltf-model>
        </a-entity>
        -->

        <!-- Marcador 7: Prótesis Mano Brazo (Descomentar después de compilar los marcadores)
        <a-entity mindar-image-target="targetIndex: 7">
          <a-gltf-model
            rotation="0 0 0"
            position="0 0 0.1"
            scale="0.3 0.3 0.3"
            src="https://raw.githubusercontent.com/instructorandradedcc/propuesta-AR/main/asetss/models/protesis-mano-brazo.glb"
            animation-mixer
          ></a-gltf-model>
        </a-entity>
        -->

      </a-scene>
    </div>

    <script>
      // Script para ocultar la pantalla de carga cuando la escena AR esté lista
      document.addEventListener('DOMContentLoaded', () => {
        const sceneEl = document.querySelector('#ar-scene');
        const loader = document.querySelector('#loader');
        
        sceneEl.addEventListener('arReady', () => {
          loader.classList.add('hidden');
        });
        
        // Un pequeño seguro en caso de que el evento no se dispare
        setTimeout(() => {
            if (!loader.classList.contains('hidden')) {
                loader.classList.add('hidden');
            }
        }, 5000);
      });
    </script>
  </body>
</html>
